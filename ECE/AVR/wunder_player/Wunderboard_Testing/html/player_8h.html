<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>WunderPlayer: C:/Users/Robert/Documents/Atmel Studio/Wunderboard_Testing/Wunderboard_Testing/player.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">WunderPlayer
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Firmware for the wunderboard that allows it to play mono 8-bit unsigned PCM .wav files through its audio out</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d522931ffa1371640980b621734a4381.html">Users</a></li><li class="navelem"><a class="el" href="dir_f64893e36f8c31d4c59df75761de097c.html">Robert</a></li><li class="navelem"><a class="el" href="dir_4d3d6b1b26f4b3c1d1a5f5a1fa4552ed.html">Documents</a></li><li class="navelem"><a class="el" href="dir_3cd17d5f66484117ab1da0fcbf108e07.html">Atmel Studio</a></li><li class="navelem"><a class="el" href="dir_d7bd47247a724fb0aa55604ff283ec7b.html">Wunderboard_Testing</a></li><li class="navelem"><a class="el" href="dir_1c0ef958be8a2841677375ef498e3036.html">Wunderboard_Testing</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">player.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;ff.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br/>
</div>
<p><a href="player_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af2f95f853226dce77e00d25e43f6db7a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#af2f95f853226dce77e00d25e43f6db7a">CPU_PRESCALE</a>(n)&#160;&#160;&#160;(CLKPR = 0x80, CLKPR = (n))</td></tr>
<tr class="separator:af2f95f853226dce77e00d25e43f6db7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa6c6e4106c586df8eacc0f84f20652b6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#aa6c6e4106c586df8eacc0f84f20652b6">initializeFAT</a> (<a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs)</td></tr>
<tr class="separator:aa6c6e4106c586df8eacc0f84f20652b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa648cd3fc8dc0c02eeabfeb94d58f351"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#aa648cd3fc8dc0c02eeabfeb94d58f351">seek_to_data</a> (const char *path)</td></tr>
<tr class="separator:aa648cd3fc8dc0c02eeabfeb94d58f351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca68d527c6558b104f9321d38fc6c3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#a5ca68d527c6558b104f9321d38fc6c3b">play_wav</a> (const char *filename, int alarm)</td></tr>
<tr class="separator:a5ca68d527c6558b104f9321d38fc6c3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a177eadcdc0be0fa847e9a072bf9dc1df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_f_i_l.html">FIL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#a177eadcdc0be0fa847e9a072bf9dc1df">wav</a></td></tr>
<tr class="separator:a177eadcdc0be0fa847e9a072bf9dc1df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0fda21034bd07ac6fec4c13235a489a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#ab0fda21034bd07ac6fec4c13235a489a">song_index</a></td></tr>
<tr class="separator:ab0fda21034bd07ac6fec4c13235a489a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a339548f700f24ffdd28b49cccaa5b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#a2a339548f700f24ffdd28b49cccaa5b8">stopPlay</a></td></tr>
<tr class="separator:a2a339548f700f24ffdd28b49cccaa5b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a917daf8250d78c2817a984261eb16e04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#a917daf8250d78c2817a984261eb16e04">playback</a></td></tr>
<tr class="separator:a917daf8250d78c2817a984261eb16e04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94e9424dc303828f7567ec74cf48191c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#a94e9424dc303828f7567ec74cf48191c">fat</a></td></tr>
<tr class="separator:a94e9424dc303828f7567ec74cf48191c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef4e36e70c98bc9722012cb25ddbe901"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#aef4e36e70c98bc9722012cb25ddbe901">sample</a> [2048]</td></tr>
<tr class="separator:aef4e36e70c98bc9722012cb25ddbe901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a842a019f98f4ef560321e15b16a627fc"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="player_8h.html#a842a019f98f4ef560321e15b16a627fc">bytes_read</a></td></tr>
<tr class="separator:a842a019f98f4ef560321e15b16a627fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Robert L. Phillips III </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.1</dd></dl>
<h1><a class="anchor" id="LICENSE"></a>
LICENSE</h1>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</p>
<h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
<p>.wav file decoding and playback functions</p>
<h1><a class="anchor" id="HARDWARE"></a>
HARDWARE</h1>
<p>Target Device: Wunderboard </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af2f95f853226dce77e00d25e43f6db7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CPU_PRESCALE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n</td><td>)</td>
          <td>&#160;&#160;&#160;(CLKPR = 0x80, CLKPR = (n))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the CPU prescale options </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa6c6e4106c586df8eacc0f84f20652b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t initializeFAT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the FAT filesystem for IO.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>The <a class="el" href="struct_f_a_t_f_s.html">FATFS</a> pointer to store the FAT handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="debug_8h.html#ae81715e108e454a61e4e3f79dcca8929">ERR_FMOUNT</a> </dd>
<dd>
<a class="el" href="debug_8h.html#a7346b381e134dd65fcb53b772933e07e">ERR_NODISK</a> </dd>
<dd>
<a class="el" href="debug_8h.html#a71927e9402d98a87c5c9eb6111058987">ERR_NOINIT</a> </dd>
<dd>
<a class="el" href="debug_8h.html#a1dbef47d09460b17753f0ddd12f56fd6">ERR_PROTECTED</a> </dd>
<dd>
<a class="el" href="debug_8h.html#aff0d3fb76f11f6e8ea4002d826bbd23c">ERR_NONE</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a5ca68d527c6558b104f9321d38fc6c3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void play_wav </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alarm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decodes the specified .wav file and reads the samples into a buffer in groups of 2048</p>
<p>If the alarm flag has not been set, the alarm flag is polled and if it is set at any time during the playback, the current .wav file playback will end immediately and playback of the alarm will begin. The playback of the alarm can not be interrupted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The file path of the .wav file to be played </td></tr>
    <tr><td class="paramname">alarm</td><td>The flag that indicates whether or not an alarm is being played </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa648cd3fc8dc0c02eeabfeb94d58f351"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void seek_to_data </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens the .wav file and advances it past the header to the data section that contains the audio samples</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The file path of the .wav file to be played</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd>FA_READ </dd>
<dd>
FA_OPEN_EXISTING </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a842a019f98f4ef560321e15b16a627fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT bytes_read</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of bytes last read from the file </p>

</div>
</div>
<a class="anchor" id="a94e9424dc303828f7567ec74cf48191c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> fat</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>FAT filesystem handle </p>

</div>
</div>
<a class="anchor" id="a917daf8250d78c2817a984261eb16e04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int playback</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag that indicates when playback of a .wav file should begin </p>

</div>
</div>
<a class="anchor" id="aef4e36e70c98bc9722012cb25ddbe901"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char sample[2048]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buffer that holds the .wav file samples </p>

</div>
</div>
<a class="anchor" id="ab0fda21034bd07ac6fec4c13235a489a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int song_index</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The index in the buffer of the next sample to be played </p>

</div>
</div>
<a class="anchor" id="a2a339548f700f24ffdd28b49cccaa5b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stopPlay</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag that indicates when playback of a .wav file should be interrupted </p>

</div>
</div>
<a class="anchor" id="a177eadcdc0be0fa847e9a072bf9dc1df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_f_i_l.html">FIL</a> wav</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>.wav file handle </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 23 2012 23:52:50 for WunderPlayer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
